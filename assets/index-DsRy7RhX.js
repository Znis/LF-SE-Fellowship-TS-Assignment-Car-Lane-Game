var N=Object.defineProperty;var b=(e,n,a)=>n in e?N(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a;var c=(e,n,a)=>(b(e,typeof n!="symbol"?n+"":n,a),a);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const A of l.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&u(A)}).observe(document,{childList:!0,subtree:!0});function a(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(o){if(o.ep)return;o.ep=!0;const l=a(o);fetch(o.href,l)}})();var s=(e=>(e.welcomeScreen="welcomeScreen",e.initialisation="initialisation",e.running="running",e.paused="paused",e.resume="resume",e.gameOver="gameOver",e.restart="restart",e))(s||{});const t={prevValidRandomYposition:0,collisionOccurred:!1,reqAnimFrame:0,opponentCarArray:[],playerCar:{},score:0,highScore:0,gameOver:!1,gameState:"welcomeScreen",isTransitionActive:!1};function S(e,n){return e+Math.floor((n-e)*Math.random())}const f={CANVAS_HEIGHT:600,CANVAS_WIDTH:600},g={MIN:-200,MAX:-2e3},P=3,h=Math.floor(f.CANVAS_WIDTH/P),C=80,m=160,w=Math.floor((h-C)/2),O=4;class x{constructor(n,a,u,o){c(this,"startPoint");c(this,"h");c(this,"w");c(this,"imagePath");c(this,"image");this.startPoint=n,this.h=a,this.w=u,this.imagePath=o,this.image=new Image,this.image.src=this.imagePath}}class y{constructor(n,a){c(this,"x");c(this,"y");c(this,"distance",n=>Math.sqrt((n.x-this.x)**2+(n.y-this.y)**2));this.x=n,this.y=a}}class E{constructor(n,a){c(this,"startPoint");c(this,"endPoint");c(this,"length",()=>Math.sqrt((this.endPoint.x-this.startPoint.x)**2+(this.endPoint.y-this.startPoint.y)**2));this.startPoint=n,this.endPoint=a}}const i=document.querySelector("#gameCanvas"),r=i.getContext("2d");i.width=f.CANVAS_WIDTH;i.height=f.CANVAS_HEIGHT;const d=[];for(let e=0;e<P-1;e++){const n=new E(new y(h*(e+1),0),new y(h*(e+1),f.CANVAS_HEIGHT));d.push(n)}function q(){i.style.display="block",r.clearRect(0,0,f.CANVAS_WIDTH,f.CANVAS_HEIGHT),r.fillStyle="#464646",r.fillRect(0,0,f.CANVAS_WIDTH,f.CANVAS_HEIGHT),V();for(let e=0;e<d.length;e++)r.setLineDash([50,20]),r.lineDashOffset-=O+t.score/5,r.lineWidth=4,r.beginPath(),r.moveTo(d[e].startPoint.x,d[e].startPoint.y),r.lineTo(d[e].endPoint.x,d[e].endPoint.y),r.strokeStyle="#FFF",r.stroke();r.beginPath(),r.drawImage(t.playerCar.image,t.playerCar.startPoint.x,t.playerCar.startPoint.y,t.playerCar.w,t.playerCar.h);for(let e=0;e<t.opponentCarArray.length;e++)r.beginPath(),r.drawImage(t.opponentCarArray[e].image,t.opponentCarArray[e].startPoint.x,t.opponentCarArray[e].startPoint.y,t.opponentCarArray[e].w,t.opponentCarArray[e].h)}i.addEventListener("click",()=>{t.gameOver&&I(),t.gameState==s.paused&&v()});function V(){r.font="24px Outfit",r.fillStyle="#fff",r.fillText("Score: "+t.score,10,30)}function _(){r.fillStyle="rgba(0, 0, 0, 0.8)",r.fillRect(0,0,i.width,i.height),r.font="48px Outfit",r.fillStyle="#ff0000",r.fillText("Game Over",i.width/2-130,i.height/2-50),r.font="32px Outfit",r.fillText(`Score: ${t.score}`,i.width/2-100,i.height/2+10),r.font="26px Outfit",r.fillText(`High Score: ${t.highScore}`,i.width/2-100,i.height/2+70),r.font="24px Outfit",r.fillText("Click to Restart",i.width/2-100,i.height/2+140)}function F(){r.fillStyle="rgba(0, 0, 0, 0.7)",r.fillRect(0,0,i.width,i.height),r.font="48px Outfit",r.fillStyle="orange",r.fillText("Game Paused",i.width/2-130,i.height/2-50),r.font="32px Outfit",r.fillText(`Score: ${t.score}`,i.width/2-100,i.height/2+10),r.font="26px Outfit",r.fillText(`High Score: ${t.highScore}`,i.width/2-100,i.height/2+70),r.font="24px Outfit",r.fillText("Click to Resume",i.width/2-100,i.height/2+140)}function T(e,n,a){const u=n=="right"?e.startPoint.x+a:e.startPoint.x-a;if(!t.isTransitionActive){t.isTransitionActive=!0;const o=setInterval(()=>{n=="left"&&e.startPoint.x>u?e.startPoint.x-=2:n=="right"&&e.startPoint.x<u?e.startPoint.x+=2:(t.isTransitionActive=!1,clearInterval(o))},1)}}function M(e,n){let a=S(e,n);for(;Math.abs(a-t.prevValidRandomYposition)<m*3;)a=S(e,n);return t.prevValidRandomYposition=a,a}function L(){for(let e=0;e<3;e++)if(t.opponentCarArray[e].startPoint.y+t.opponentCarArray[e].h>=t.playerCar.startPoint.y&&t.opponentCarArray[e].startPoint.x==t.playerCar.startPoint.x){t.collisionOccurred=!0;break}}function D(){for(let e=0;e<t.opponentCarArray.length;e++)t.opponentCarArray[e].startPoint.y+=O+t.score/5,t.opponentCarArray[e].startPoint.y>f.CANVAS_HEIGHT&&(R(),t.opponentCarArray[e].startPoint.y=M(g.MIN,g.MAX))}function R(){t.score++,t.highScore=t.score>t.highScore?t.score:t.highScore}function I(){t.score=0,t.gameOver=!1,t.collisionOccurred=!1,t.opponentCarArray=[],t.gameState=s.restart,requestAnimationFrame(p)}function k(){t.gameState==s.running&&(t.gameState=s.paused,cancelAnimationFrame(t.reqAnimFrame),F())}function v(){t.gameState==s.paused&&(t.gameState=s.running,requestAnimationFrame(p))}function G(){t.gameState=s.initialisation,requestAnimationFrame(p)}function W(e,n,a){n.innerHTML=`${a}  &nbsp; &nbsp;<b>${t.score}</b>`,e.appendChild(n)}function $(){t.playerCar=new x(new y(w,f.CANVAS_HEIGHT-m*1.1),m,C,"./assets/images/car1.png");for(let e=0;e<P;e++){const n=new x(new y(w+h*e,S(g.MIN,g.MAX)),m,C,`./assets/images/opponent-car${e+2}.png`);t.opponentCarArray.push(n)}}window.addEventListener("keypress",e=>{switch(e.key){case"a":{t.playerCar.startPoint.x-h>=0&&T(t.playerCar,"left",h);break}case"d":{t.playerCar.startPoint.x+h<=f.CANVAS_WIDTH&&T(t.playerCar,"right",h);break}case"q":{t.gameState==s.running?k():t.gameState==s.paused&&v();break}case"e":{t.gameState==s.gameOver&&I();break}}});const Y=document.querySelector("#enter-btn"),B=document.querySelector("#side-title"),X=document.querySelector("#intro-div"),K=document.querySelector("#right-container"),U=document.querySelector("#leaderboard-ol"),j=document.createElement("li"),z=document.querySelector("#name");let H="";Y.addEventListener("click",()=>{H=z.value||"",X.style.display="none",K.style.display="flex",B.style.display="block",G()});function p(){t.reqAnimFrame=requestAnimationFrame(p),(t.gameState==s.initialisation||t.gameState==s.restart)&&($(),t.gameState=s.running),q(),L(),D(),t.collisionOccurred&&(_(),W(U,j,H),t.highScore=t.score>t.highScore?t.score:t.highScore,t.gameOver=!0,t.gameState=s.gameOver,cancelAnimationFrame(t.reqAnimFrame))}t.gameState!=s.welcomeScreen&&requestAnimationFrame(p);
